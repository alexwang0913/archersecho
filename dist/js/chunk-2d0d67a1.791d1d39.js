(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d67a1"],{"735d":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vs-con-loading__container",attrs:{id:"div-support-ticket"}},[n("vx-card",[n("vs-select",{staticClass:"selectExample",attrs:{label:"Select instances"},model:{value:t.instance,callback:function(e){t.instance=e},expression:"instance"}},t._l(t.instances,function(t,e){return n("vs-select-item",{key:e,attrs:{value:t.database,text:t.name}})}),1),n("vs-button",{staticClass:"mt-4",on:{click:t.generateTicket}},[t._v("Generate")]),t.showTicketMsg?n("vs-textarea",{staticClass:"mt-4",attrs:{rows:"15",label:"Email template to RSA"},model:{value:t.ticketMessage,callback:function(e){t.ticketMessage=e},expression:"ticketMessage"}}):t._e(),n("vs-table",{staticClass:"mt-4",attrs:{"max-items":"10",pagination:"",data:t.ticketList},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,function(e,s){return n("vs-tr",{key:s,attrs:{data:e}},[n("vs-td",[t._v(t._s(e.userName))]),n("vs-td",[t._v(t._s(e.password))]),n("vs-td",[n("vs-chip",{attrs:{color:e.isLogin?"success":"warning"}},[t._v(t._s(e.isLogin?"Logged in":"Never logged in"))])],1),n("vs-td",[n("vs-switch",{on:{click:function(n){t.updateTicketActiveStatus(e)}},model:{value:e.isActive,callback:function(n){t.$set(e,"isActive",n)},expression:"tr.isActive"}})],1),n("vs-td",[n("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"MailIcon",svgClasses:"w-5 h-5 mr-4"},on:{click:function(n){t.viewEmail(e._id)}}}),n("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 mr-4"},on:{click:function(n){t.confirmDialog(e._id)}}})],1)],1)})}}])},[n("template",{slot:"thead"},[n("vs-th",[t._v("Temp username")]),n("vs-th",[t._v("Temp userpassword")]),n("vs-th",[t._v("Login status")]),n("vs-th",[t._v("Active status")]),n("vs-th",[t._v("Action")])],1)],2)],1)],1)},i=[],r=(n("96cf"),n("3b8d")),c=n("8055"),a=n.n(c),o=n("60fe"),u=n("ed08"),l=n("98ca"),p=n("b39f"),d=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({method:"GET",url:"/api/device/supportTicketList/".concat(e)});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({method:"PUT",url:"/api/ticket/".concat(e),data:n});case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({method:"DELETE",url:"/api/ticket/".concat(e)});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({method:"POST",url:"/api/ticket",data:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),f={getList:d,update:h,deleteTicket:v,add:k},g={data:function(){return{socket:a()(o["SERVER_URL"]),user:Object(u["b"])("user"),archerId:this.$route.params.id,instances:[],instance:null,ticketMessage:"",ticketList:[],showTicketMsg:!1,resCount:0,ticketInfo:{},ticketIdToDelete:null}},mounted:function(){this.responseSocket(),this.getInstances(),this.getSupportTickets()},methods:{responseSocket:function(){var t=this;this.socket.on("connect",function(){t.socket.emit("REQ_USER_CONNECTED",t.user.id)}),this.socket.on("RES_SUPPORT_TICKET",function(e){console.log("response from SupportTicket"),console.log(e),t.ticketInfo.id=e.id,t.ticketInfo.userName=e.tempUserName,t.ticketInfo.password=e.tempPassword,3===++t.resCount&&t.generateMail()}),this.socket.on("RES_SUPPORT_TICKET_PRODUCTION",function(e){console.log("response from SupportTicketProduction"),console.log(e),t.ticketInfo.production=e,3===++t.resCount&&t.generateMail()}),this.socket.on("RES_SUPPORT_TICKET_VERSION",function(e){console.log("response from SupportTicketVersion"),console.log(e),t.ticketInfo.version=e,3===++t.resCount&&t.generateMail()}),this.socket.on("RES_GET_SUPPORT_TICKET_MAIL",function(e){t.ticketMessage=e,t.$vs.loading.close("#div-support-ticket > .con-vs-loading"),t.showTicketMsg=!0})},getInstances:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$vs.loading({container:"#div-support-ticket",scale:.6,type:"radius"}),t.next=3,l["a"].getInstances(this.archerId);case 3:this.instances=t.sent,this.$vs.loading.close("#div-support-ticket > .con-vs-loading");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),generateTicket:function(){this.$vs.loading({container:"#div-support-ticket",scale:.6,type:"radius"});var t={archerId:this.archerId,instance:this.instance,userId:this.user.id};this.socket.emit("REQ_SUPPORT_TICKET",t),this.socket.emit("REQ_SUPPORT_TICKET_PRODUCTION",t),this.socket.emit("REQ_SUPPORT_TICKET_VERSION",t)},generateMail:function(){var t=window.location.origin+"/tempLogin";this.ticketMessage="RSA,\n\nThe following instance needs support\nLicense Key: \nProduction/Non-Production: ".concat(this.ticketInfo.production,"\nVersion of Archer: ").concat(this.ticketInfo.version,"\n\nThe following URL will provide insight into the current Archer environment that is setup including Hardware Devices, Error Logs, and Services\n\nLink: ").concat(t,"\nTemporary Username: ").concat(this.ticketInfo.userName,"\nTemporary Password: ").concat(this.ticketInfo.password,"\n"),this.showTicketMsg=!0,this.$vs.loading.close("#div-support-ticket > .con-vs-loading");var e={ticketId:this.ticketInfo.id,mail:this.ticketMessage};this.socket.emit("REQ_SAVE_SUPPORT_TICKET_MAIL",e),this.resCount=0,this.getSupportTickets()},getSupportTickets:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].getSupportTickets(this.archerId);case 2:this.ticketList=t.sent,console.log(this.ticketList);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateTicketActiveStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.update(e._id,{isActive:!e.isActive});case 2:this.getSupportTickets();case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),viewEmail:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(e),this.$vs.loading({container:"#div-support-ticket",scale:.6,type:"radius"}),this.showTicketMsg=!1,this.socket.emit("REQ_GET_SUPPORT_TICKET_MAIL",e);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),confirmDialog:function(t){this.ticketIdToDelete=t,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure delete this ticket?",accept:this.deleteTicket})},deleteTicket:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.deleteTicket(this.ticketIdToDelete);case 2:this.getSupportTickets(),this.$vs.notify({color:"success",title:"Success",text:"Sucess in delete ticket"});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},m=g,T=n("2877"),w=Object(T["a"])(m,s,i,!1,null,"69ae0cd8",null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0d67a1.791d1d39.js.map