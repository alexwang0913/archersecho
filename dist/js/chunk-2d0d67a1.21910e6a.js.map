{"version":3,"sources":["webpack:///./src/views/support-ticket/Index.vue?0c89","webpack:///./src/api/supportTicket/index.js","webpack:///src/views/support-ticket/Index.vue","webpack:///./src/views/support-ticket/Index.vue?e4c3","webpack:///./src/views/support-ticket/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","label","model","value","callback","$$v","instance","expression","_l","item","index","key","database","text","name","on","click","generateTicket","_v","rows","ticketMessage","_e","max-items","pagination","data","ticketList","scopedSlots","_u","fn","ref","tr","indextr","_s","userName","password","color","isLogin","$event","updateTicketActiveStatus","$set","icon","svgClasses","viewEmail","_id","confirmDialog","slot","staticRenderFns","getList","_ref","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","deviceId","response","wrap","_context","prev","next","client","method","url","concat","sent","abrupt","stop","_x","apply","arguments","update","_ref2","_callee2","ticketId","_context2","_x2","_x3","deleteTicket","_ref3","_callee3","_context3","_x4","add","_ref4","_callee4","_context4","_x5","supportTicket","Indexvue_type_script_lang_js_","socket","lib_default","constant","user","utils","archerId","$route","params","instances","showTicketMsg","resCount","ticketInfo","ticketIdToDelete","arriveResponse","timer","mounted","responseSocket","getInstances","getSupportTickets","methods","_this","emit","console","log","tempUserName","tempPassword","generateMail","production","version","mail","$vs","loading","close","_getInstances","container","scale","type","archer","userId","checkResponse","link","window","location","origin","saveTicketData","_getSupportTickets","_updateTicketActiveStatus","ticket","isActive","_viewEmail","dialog","title","accept","_deleteTicket","_callee5","_context5","notify","vm","setTimeout","support_ticket_Indexvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0d67a1.21910e6a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vs-con-loading__container\",attrs:{\"id\":\"div-support-ticket\"}},[_c('vx-card',[_c('vs-select',{staticClass:\"selectExample\",attrs:{\"label\":\"Select instances\"},model:{value:(_vm.instance),callback:function ($$v) {_vm.instance=$$v},expression:\"instance\"}},_vm._l((_vm.instances),function(item,index){return _c('vs-select-item',{key:index,attrs:{\"value\":item.database,\"text\":item.name}})}),1),_c('vs-button',{staticClass:\"mt-4\",on:{\"click\":_vm.generateTicket}},[_vm._v(\"Generate\")]),(_vm.showTicketMsg)?_c('vs-textarea',{staticClass:\"mt-4\",attrs:{\"rows\":\"15\",\"label\":\"Email template to RSA\"},model:{value:(_vm.ticketMessage),callback:function ($$v) {_vm.ticketMessage=$$v},expression:\"ticketMessage\"}}):_vm._e(),_c('vs-table',{staticClass:\"mt-4\",attrs:{\"max-items\":\"10\",\"pagination\":\"\",\"data\":_vm.ticketList},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _vm._l((data),function(tr,indextr){return _c('vs-tr',{key:indextr,attrs:{\"data\":tr}},[_c('vs-td',[_vm._v(_vm._s(tr.userName))]),_c('vs-td',[_vm._v(_vm._s(tr.password))]),_c('vs-td',[_c('vs-chip',{attrs:{\"color\":tr.isLogin ? 'success' : 'warning'}},[_vm._v(_vm._s(tr.isLogin ? \"Logged in\" : \"Never logged in\"))])],1),_c('vs-td',[_c('vs-switch',{on:{\"click\":function($event){_vm.updateTicketActiveStatus(tr)}},model:{value:(tr.isActive),callback:function ($$v) {_vm.$set(tr, \"isActive\", $$v)},expression:\"tr.isActive\"}})],1),_c('vs-td',[_c('feather-icon',{staticClass:\"cursor-pointer\",attrs:{\"icon\":\"MailIcon\",\"svgClasses\":\"w-5 h-5 mr-4\"},on:{\"click\":function($event){_vm.viewEmail(tr._id)}}}),_c('feather-icon',{staticClass:\"cursor-pointer\",attrs:{\"icon\":\"TrashIcon\",\"svgClasses\":\"w-5 h-5 mr-4\"},on:{\"click\":function($event){_vm.confirmDialog(tr._id)}}})],1)],1)})}}])},[_c('template',{slot:\"thead\"},[_c('vs-th',[_vm._v(\"Temp username\")]),_c('vs-th',[_vm._v(\"Temp userpassword\")]),_c('vs-th',[_vm._v(\"Login status\")]),_c('vs-th',[_vm._v(\"Active status\")]),_c('vs-th',[_vm._v(\"Action\")])],1)],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import client from \"../client\";\r\n\r\nconst getList = async deviceId => {\r\n  const response = await client({\r\n    method: \"GET\",\r\n    url: `/api/device/supportTicketList/${deviceId}`\r\n  });\r\n  return response.data;\r\n};\r\n\r\nconst update = async (ticketId, data) => {\r\n  const response = await client({\r\n    method: \"PUT\",\r\n    url: `/api/ticket/${ticketId}`,\r\n    data\r\n  });\r\n  return response.data;\r\n};\r\n\r\nconst deleteTicket = async ticketId => {\r\n  const response = await client({\r\n    method: \"DELETE\",\r\n    url: `/api/ticket/${ticketId}`\r\n  });\r\n  return response.data;\r\n};\r\n\r\nconst add = async data => {\r\n  const response = await client({\r\n    method: \"POST\",\r\n    url: \"/api/ticket\",\r\n    data\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport default {\r\n  getList,\r\n  update,\r\n  deleteTicket,\r\n  add\r\n};\r\n","<template>\r\n  <div id=\"div-support-ticket\" class=\"vs-con-loading__container\">\r\n    <vx-card>\r\n      <vs-select class=\"selectExample\" v-model=\"instance\" label=\"Select instances\">\r\n        <vs-select-item\r\n          :key=\"index\"\r\n          :value=\"item.database\"\r\n          :text=\"item.name\"\r\n          v-for=\"(item,index) in instances\"\r\n        />\r\n      </vs-select>\r\n\r\n      <vs-button class=\"mt-4\" @click=\"generateTicket\">Generate</vs-button>\r\n\r\n      <vs-textarea\r\n        v-if=\"showTicketMsg\"\r\n        class=\"mt-4\"\r\n        rows=\"15\"\r\n        label=\"Email template to RSA\"\r\n        v-model=\"ticketMessage\"\r\n      />\r\n\r\n      <vs-table max-items=\"10\" pagination :data=\"ticketList\" class=\"mt-4\">\r\n        <template slot=\"thead\">\r\n          <vs-th>Temp username</vs-th>\r\n          <vs-th>Temp userpassword</vs-th>\r\n          <vs-th>Login status</vs-th>\r\n          <vs-th>Active status</vs-th>\r\n          <vs-th>Action</vs-th>\r\n        </template>\r\n\r\n        <template slot-scope=\"{data}\">\r\n          <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n            <vs-td>{{tr.userName}}</vs-td>\r\n            <vs-td>{{tr.password}}</vs-td>\r\n            <vs-td>\r\n              <vs-chip\r\n                :color=\"tr.isLogin ? 'success' : 'warning'\"\r\n              >{{tr.isLogin ? \"Logged in\" : \"Never logged in\"}}</vs-chip>\r\n            </vs-td>\r\n            <vs-td>\r\n              <vs-switch v-model=\"tr.isActive\" @click=\"updateTicketActiveStatus(tr)\"/>\r\n            </vs-td>\r\n            <vs-td>\r\n              <feather-icon\r\n                icon=\"MailIcon\"\r\n                class=\"cursor-pointer\"\r\n                svgClasses=\"w-5 h-5 mr-4\"\r\n                @click=\"viewEmail(tr._id)\"\r\n              ></feather-icon>\r\n              <feather-icon\r\n                icon=\"TrashIcon\"\r\n                class=\"cursor-pointer\"\r\n                svgClasses=\"w-5 h-5 mr-4\"\r\n                @click=\"confirmDialog(tr._id)\"\r\n              ></feather-icon>\r\n            </vs-td>\r\n          </vs-tr>\r\n        </template>\r\n      </vs-table>\r\n    </vx-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport io from \"socket.io-client\";\r\nimport { SERVER_URL } from \"../../utils/constant\";\r\nimport { getFromStorage } from \"../../utils\";\r\n\r\nimport archerApi from \"../../api/archer\";\r\nimport ticketApi from \"../../api/supportTicket\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      socket: io(SERVER_URL),\r\n      user: getFromStorage(\"user\"),\r\n      archerId: this.$route.params.id,\r\n\r\n      instances: [],\r\n      instance: null,\r\n      ticketMessage: \"\",\r\n      ticketList: [],\r\n      showTicketMsg: false,\r\n\r\n      resCount: 0,\r\n      ticketInfo: {},\r\n      ticketIdToDelete: null,\r\n      arriveResponse: false,\r\n      timer: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.responseSocket();\r\n    this.getInstances();\r\n    this.getSupportTickets();\r\n  },\r\n  methods: {\r\n    responseSocket() {\r\n      this.socket.on(\"connect\", () => {\r\n        this.socket.emit(\"REQ_USER_CONNECTED\", this.user.id);\r\n      });\r\n      this.socket.on(\"RES_SUPPORT_TICKET\", response => {\r\n        console.log(\"response from SupportTicket\");\r\n        console.log(response);\r\n        this.ticketInfo.id = response.id;\r\n        this.ticketInfo.userName = response.tempUserName;\r\n        this.ticketInfo.password = response.tempPassword;\r\n        if (++this.resCount === 3) {\r\n          this.generateMail();\r\n        }\r\n        // this.arriveResponse = true;\r\n      });\r\n      this.socket.on(\"RES_SUPPORT_TICKET_PRODUCTION\", response => {\r\n        console.log(\"response from SupportTicketProduction\");\r\n        console.log(response);\r\n        this.ticketInfo.production = response;\r\n        if (++this.resCount === 3) {\r\n          this.generateMail();\r\n        }\r\n        this.arriveResponse = true;\r\n      });\r\n      this.socket.on(\"RES_SUPPORT_TICKET_VERSION\", response => {\r\n        console.log(\"response from SupportTicketVersion\");\r\n        console.log(response);\r\n        this.ticketInfo.version = response;\r\n        if (++this.resCount === 3) {\r\n          this.generateMail();\r\n        }\r\n        this.arriveResponse = true;\r\n      });\r\n      this.socket.on(\"RES_GET_SUPPORT_TICKET_MAIL\", mail => {\r\n        this.ticketMessage = mail;\r\n        this.$vs.loading.close(\"#div-support-ticket > .con-vs-loading\");\r\n        this.showTicketMsg = true;\r\n      });\r\n    },\r\n    async getInstances() {\r\n      this.$vs.loading({\r\n        container: \"#div-support-ticket\",\r\n        scale: 0.6,\r\n        type: \"radius\"\r\n      });\r\n      this.instances = await archerApi.getInstances(this.archerId);\r\n      this.$vs.loading.close(\"#div-support-ticket > .con-vs-loading\");\r\n    },\r\n    generateTicket() {\r\n      this.$vs.loading({\r\n        container: \"#div-support-ticket\",\r\n        scale: 0.6,\r\n        type: \"radius\"\r\n      });\r\n      const data = {\r\n        archerId: this.archerId,\r\n        instance: this.instance,\r\n        userId: this.user.id\r\n      };\r\n      this.socket.emit(\"REQ_SUPPORT_TICKET\", data);\r\n      this.socket.emit(\"REQ_SUPPORT_TICKET_PRODUCTION\", data);\r\n      this.socket.emit(\"REQ_SUPPORT_TICKET_VERSION\", data);\r\n      this.checkResponse();\r\n    },\r\n    generateMail() {\r\n      const link = window.location.origin + \"/tempLogin\";\r\n\r\n      this.ticketMessage = `RSA,\r\n\r\nThe following instance needs support\r\nLicense Key: \r\nProduction/Non-Production: ${this.ticketInfo.production}\r\nVersion of Archer: ${this.ticketInfo.version}\r\n\r\nThe following URL will provide insight into the current Archer environment that is setup including Hardware Devices, Error Logs, and Services\r\n\r\nLink: ${link}\r\nTemporary Username: ${this.ticketInfo.userName}\r\nTemporary Password: ${this.ticketInfo.password}\r\n`;\r\n      this.showTicketMsg = true;\r\n      this.$vs.loading.close(\"#div-support-ticket > .con-vs-loading\");\r\n\r\n      const saveTicketData = {\r\n        ticketId: this.ticketInfo.id,\r\n        mail: this.ticketMessage\r\n      };\r\n      this.socket.emit(\"REQ_SAVE_SUPPORT_TICKET_MAIL\", saveTicketData);\r\n      this.resCount = 0;\r\n      this.getSupportTickets();\r\n    },\r\n    async getSupportTickets() {\r\n      this.ticketList = await archerApi.getSupportTickets(this.archerId);\r\n      console.log(this.ticketList);\r\n    },\r\n    async updateTicketActiveStatus(ticket) {\r\n      await ticketApi.update(ticket._id, {\r\n        isActive: !ticket.isActive\r\n      });\r\n\r\n      this.getSupportTickets();\r\n    },\r\n    async viewEmail(ticketId) {\r\n      console.log(ticketId);\r\n      this.$vs.loading({\r\n        container: \"#div-support-ticket\",\r\n        scale: 0.6,\r\n        type: \"radius\"\r\n      });\r\n      this.showTicketMsg = false;\r\n\r\n      this.socket.emit(\"REQ_GET_SUPPORT_TICKET_MAIL\", ticketId);\r\n    },\r\n    confirmDialog(ticketId) {\r\n      this.ticketIdToDelete = ticketId;\r\n      this.$vs.dialog({\r\n        type: \"confirm\",\r\n        color: \"danger\",\r\n        title: `Confirm`,\r\n        text: \"Are you sure delete this ticket?\",\r\n        accept: this.deleteTicket\r\n      });\r\n    },\r\n    async deleteTicket() {\r\n      await ticketApi.deleteTicket(this.ticketIdToDelete);\r\n      this.getSupportTickets();\r\n      this.$vs.notify({\r\n        color: \"success\",\r\n        title: \"Success\",\r\n        text: \"Sucess in delete ticket\"\r\n      });\r\n    },\r\n    checkResponse() {\r\n      const vm = this;\r\n      setTimeout(() => {\r\n        if (!vm.arriveResponse) {\r\n          vm.$vs.loading.close(\"#div-support-ticket > .con-vs-loading\");\r\n          vm.$vs.notify({\r\n            color: \"warning\",\r\n            title: \"Warning\",\r\n            text: \"No response from server.\"\r\n          });\r\n          vm.generateMail();\r\n        }\r\n      }, 1000 * 10);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=17af6f38&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17af6f38\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}